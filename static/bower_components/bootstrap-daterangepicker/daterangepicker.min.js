(function(c,d){if(typeof define==='function'&&define.amd){define(['moment','jquery'],function(a,b){return(c.daterangepicker=d(a,b))})}else if(typeof module==='object'&&module.exports){var e=(typeof window!='undefined')?window.jQuery:undefined;if(!e){e=require('jquery');if(!e.fn)e.fn={}}module.exports=d(require('moment'),e)}else{c.daterangepicker=d(c.moment,c.jQuery)}}(this,function(P,$){var Q=function(a,b,c){this.parentEl='body';this.element=$(a);this.startDate=P().startOf('day');this.endDate=P().endOf('day');this.minDate=false;this.maxDate=false;this.dateLimit=false;this.autoApply=false;this.singleDatePicker=false;this.showDropdowns=false;this.showWeekNumbers=false;this.showISOWeekNumbers=false;this.showCustomRangeLabel=true;this.timePicker=false;this.timePicker24Hour=false;this.timePickerIncrement=1;this.timePickerSeconds=false;this.linkedCalendars=true;this.autoUpdateInput=true;this.alwaysShowCalendars=false;this.ranges={};this.opens='right';if(this.element.hasClass('pull-right'))this.opens='left';this.drops='down';if(this.element.hasClass('dropup'))this.drops='up';this.buttonClasses='btn btn-sm';this.applyClass='btn-success';this.cancelClass='btn-default';this.locale={direction:'ltr',format:P.localeData().longDateFormat('L'),separator:' - ',applyLabel:'Apply',cancelLabel:'Cancel',weekLabel:'W',customRangeLabel:'Custom Range',daysOfWeek:P.weekdaysMin(),monthNames:P.monthsShort(),firstDay:P.localeData().firstDayOfWeek()};this.callback=function(){};this.isShowing=false;this.leftCalendar={};this.rightCalendar={};if(typeof b!=='object'||b===null)b={};b=$.extend(this.element.data(),b);if(typeof b.template!=='string'&&!(b.template instanceof $))b.template='<div class="daterangepicker dropdown-menu">'+'<div class="calendar left">'+'<div class="daterangepicker_input">'+'<input class="input-mini form-control" type="text" name="daterangepicker_start" value="" />'+'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+'<div class="calendar-time">'+'<div></div>'+'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+'</div>'+'</div>'+'<div class="calendar-table"></div>'+'</div>'+'<div class="calendar right">'+'<div class="daterangepicker_input">'+'<input class="input-mini form-control" type="text" name="daterangepicker_end" value="" />'+'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+'<div class="calendar-time">'+'<div></div>'+'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+'</div>'+'</div>'+'<div class="calendar-table"></div>'+'</div>'+'<div class="ranges">'+'<div class="range_inputs">'+'<button class="applyBtn" disabled="disabled" type="button"></button> '+'<button class="cancelBtn" type="button"></button>'+'</div>'+'</div>'+'</div>';this.parentEl=(b.parentEl&&$(b.parentEl).length)?$(b.parentEl):$(this.parentEl);this.container=$(b.template).appendTo(this.parentEl);if(typeof b.locale==='object'){if(typeof b.locale.direction==='string')this.locale.direction=b.locale.direction;if(typeof b.locale.format==='string')this.locale.format=b.locale.format;if(typeof b.locale.separator==='string')this.locale.separator=b.locale.separator;if(typeof b.locale.daysOfWeek==='object')this.locale.daysOfWeek=b.locale.daysOfWeek.slice();if(typeof b.locale.monthNames==='object')this.locale.monthNames=b.locale.monthNames.slice();if(typeof b.locale.firstDay==='number')this.locale.firstDay=b.locale.firstDay;if(typeof b.locale.applyLabel==='string')this.locale.applyLabel=b.locale.applyLabel;if(typeof b.locale.cancelLabel==='string')this.locale.cancelLabel=b.locale.cancelLabel;if(typeof b.locale.weekLabel==='string')this.locale.weekLabel=b.locale.weekLabel;if(typeof b.locale.customRangeLabel==='string'){var d=document.createElement('textarea');d.innerHTML=b.locale.customRangeLabel;var e=d.value;this.locale.customRangeLabel=e}}this.container.addClass(this.locale.direction);if(typeof b.startDate==='string')this.startDate=P(b.startDate,this.locale.format);if(typeof b.endDate==='string')this.endDate=P(b.endDate,this.locale.format);if(typeof b.minDate==='string')this.minDate=P(b.minDate,this.locale.format);if(typeof b.maxDate==='string')this.maxDate=P(b.maxDate,this.locale.format);if(typeof b.startDate==='object')this.startDate=P(b.startDate);if(typeof b.endDate==='object')this.endDate=P(b.endDate);if(typeof b.minDate==='object')this.minDate=P(b.minDate);if(typeof b.maxDate==='object')this.maxDate=P(b.maxDate);if(this.minDate&&this.startDate.isBefore(this.minDate))this.startDate=this.minDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))this.endDate=this.maxDate.clone();if(typeof b.applyClass==='string')this.applyClass=b.applyClass;if(typeof b.cancelClass==='string')this.cancelClass=b.cancelClass;if(typeof b.dateLimit==='object')this.dateLimit=b.dateLimit;if(typeof b.opens==='string')this.opens=b.opens;if(typeof b.drops==='string')this.drops=b.drops;if(typeof b.showWeekNumbers==='boolean')this.showWeekNumbers=b.showWeekNumbers;if(typeof b.showISOWeekNumbers==='boolean')this.showISOWeekNumbers=b.showISOWeekNumbers;if(typeof b.buttonClasses==='string')this.buttonClasses=b.buttonClasses;if(typeof b.buttonClasses==='object')this.buttonClasses=b.buttonClasses.join(' ');if(typeof b.showDropdowns==='boolean')this.showDropdowns=b.showDropdowns;if(typeof b.showCustomRangeLabel==='boolean')this.showCustomRangeLabel=b.showCustomRangeLabel;if(typeof b.singleDatePicker==='boolean'){this.singleDatePicker=b.singleDatePicker;if(this.singleDatePicker)this.endDate=this.startDate.clone()}if(typeof b.timePicker==='boolean')this.timePicker=b.timePicker;if(typeof b.timePickerSeconds==='boolean')this.timePickerSeconds=b.timePickerSeconds;if(typeof b.timePickerIncrement==='number')this.timePickerIncrement=b.timePickerIncrement;if(typeof b.timePicker24Hour==='boolean')this.timePicker24Hour=b.timePicker24Hour;if(typeof b.autoApply==='boolean')this.autoApply=b.autoApply;if(typeof b.autoUpdateInput==='boolean')this.autoUpdateInput=b.autoUpdateInput;if(typeof b.linkedCalendars==='boolean')this.linkedCalendars=b.linkedCalendars;if(typeof b.isInvalidDate==='function')this.isInvalidDate=b.isInvalidDate;if(typeof b.isCustomDate==='function')this.isCustomDate=b.isCustomDate;if(typeof b.alwaysShowCalendars==='boolean')this.alwaysShowCalendars=b.alwaysShowCalendars;if(this.locale.firstDay!=0){var f=this.locale.firstDay;while(f>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());f--}}var g,end,range;if(typeof b.startDate==='undefined'&&typeof b.endDate==='undefined'){if($(this.element).is('input[type=text]')){var h=$(this.element).val(),split=h.split(this.locale.separator);g=end=null;if(split.length==2){g=P(split[0],this.locale.format);end=P(split[1],this.locale.format)}else if(this.singleDatePicker&&h!==""){g=P(h,this.locale.format);end=P(h,this.locale.format)}if(g!==null&&end!==null){this.setStartDate(g);this.setEndDate(end)}}}if(typeof b.ranges==='object'){for(range in b.ranges){if(typeof b.ranges[range][0]==='string')g=P(b.ranges[range][0],this.locale.format);else g=P(b.ranges[range][0]);if(typeof b.ranges[range][1]==='string')end=P(b.ranges[range][1],this.locale.format);else end=P(b.ranges[range][1]);if(this.minDate&&g.isBefore(this.minDate))g=this.minDate.clone();var i=this.maxDate;if(this.dateLimit&&i&&g.clone().add(this.dateLimit).isAfter(i))i=g.clone().add(this.dateLimit);if(i&&end.isAfter(i))end=i.clone();if((this.minDate&&end.isBefore(this.minDate,this.timepicker?'minute':'day'))||(i&&g.isAfter(i,this.timepicker?'minute':'day')))continue;var d=document.createElement('textarea');d.innerHTML=range;var e=d.value;this.ranges[e]=[g,end]}var j='<ul>';for(range in this.ranges){j+='<li data-range-key="'+range+'">'+range+'</li>'}if(this.showCustomRangeLabel){j+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+'</li>'}j+='</ul>';this.container.find('.ranges').prepend(j)}if(typeof c==='function'){this.callback=c}if(!this.timePicker){this.startDate=this.startDate.startOf('day');this.endDate=this.endDate.endOf('day');this.container.find('.calendar-time').hide()}if(this.timePicker&&this.autoApply)this.autoApply=false;if(this.autoApply&&typeof b.ranges!=='object'){this.container.find('.ranges').hide()}else if(this.autoApply){this.container.find('.applyBtn, .cancelBtn').addClass('hide')}if(this.singleDatePicker){this.container.addClass('single');this.container.find('.calendar.left').addClass('single');this.container.find('.calendar.left').show();this.container.find('.calendar.right').hide();this.container.find('.daterangepicker_input input, .daterangepicker_input > i').hide();if(this.timePicker){this.container.find('.ranges ul').hide()}else{this.container.find('.ranges').hide()}}if((typeof b.ranges==='undefined'&&!this.singleDatePicker)||this.alwaysShowCalendars){this.container.addClass('show-calendar')}this.container.addClass('opens'+this.opens);if(typeof b.ranges!=='undefined'&&this.opens=='right'){this.container.find('.ranges').prependTo(this.container.find('.calendar.left').parent())}this.container.find('.applyBtn, .cancelBtn').addClass(this.buttonClasses);if(this.applyClass.length)this.container.find('.applyBtn').addClass(this.applyClass);if(this.cancelClass.length)this.container.find('.cancelBtn').addClass(this.cancelClass);this.container.find('.applyBtn').html(this.locale.applyLabel);this.container.find('.cancelBtn').html(this.locale.cancelLabel);this.container.find('.calendar').on('click.daterangepicker','.prev',$.proxy(this.clickPrev,this)).on('click.daterangepicker','.next',$.proxy(this.clickNext,this)).on('mousedown.daterangepicker','td.available',$.proxy(this.clickDate,this)).on('mouseenter.daterangepicker','td.available',$.proxy(this.hoverDate,this)).on('mouseleave.daterangepicker','td.available',$.proxy(this.updateFormInputs,this)).on('change.daterangepicker','select.yearselect',$.proxy(this.monthOrYearChanged,this)).on('change.daterangepicker','select.monthselect',$.proxy(this.monthOrYearChanged,this)).on('change.daterangepicker','select.hourselect,select.minuteselect,select.secondselect,select.ampmselect',$.proxy(this.timeChanged,this)).on('click.daterangepicker','.daterangepicker_input input',$.proxy(this.showCalendars,this)).on('focus.daterangepicker','.daterangepicker_input input',$.proxy(this.formInputsFocused,this)).on('blur.daterangepicker','.daterangepicker_input input',$.proxy(this.formInputsBlurred,this)).on('change.daterangepicker','.daterangepicker_input input',$.proxy(this.formInputsChanged,this));this.container.find('.ranges').on('click.daterangepicker','button.applyBtn',$.proxy(this.clickApply,this)).on('click.daterangepicker','button.cancelBtn',$.proxy(this.clickCancel,this)).on('click.daterangepicker','li',$.proxy(this.clickRange,this)).on('mouseenter.daterangepicker','li',$.proxy(this.hoverRange,this)).on('mouseleave.daterangepicker','li',$.proxy(this.updateFormInputs,this));if(this.element.is('input')||this.element.is('button')){this.element.on({'click.daterangepicker':$.proxy(this.show,this),'focus.daterangepicker':$.proxy(this.show,this),'keyup.daterangepicker':$.proxy(this.elementChanged,this),'keydown.daterangepicker':$.proxy(this.keydown,this)})}else{this.element.on('click.daterangepicker',$.proxy(this.toggle,this))}if(this.element.is('input')&&!this.singleDatePicker&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));this.element.trigger('change')}else if(this.element.is('input')&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger('change')}};Q.prototype={constructor:Q,setStartDate:function(a){if(typeof a==='string')this.startDate=P(a,this.locale.format);if(typeof a==='object')this.startDate=P(a);if(!this.timePicker)this.startDate=this.startDate.startOf('day');if(this.timePicker&&this.timePickerIncrement)this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.minDate&&this.startDate.isBefore(this.minDate)){this.startDate=this.minDate.clone();if(this.timePicker&&this.timePickerIncrement)this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)}if(this.maxDate&&this.startDate.isAfter(this.maxDate)){this.startDate=this.maxDate.clone();if(this.timePicker&&this.timePickerIncrement)this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)}if(!this.isShowing)this.updateElement();this.updateMonthsInView()},setEndDate:function(a){if(typeof a==='string')this.endDate=P(a,this.locale.format);if(typeof a==='object')this.endDate=P(a);if(!this.timePicker)this.endDate=this.endDate.endOf('day');if(this.timePicker&&this.timePickerIncrement)this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.endDate.isBefore(this.startDate))this.endDate=this.startDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))this.endDate=this.maxDate.clone();if(this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate))this.endDate=this.startDate.clone().add(this.dateLimit);this.previousRightTime=this.endDate.clone();if(!this.isShowing)this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return false},isCustomDate:function(){return false},updateView:function(){if(this.timePicker){this.renderTimePicker('left');this.renderTimePicker('right');if(!this.endDate){this.container.find('.right .calendar-time select').attr('disabled','disabled').addClass('disabled')}else{this.container.find('.right .calendar-time select').removeAttr('disabled').removeClass('disabled')}}if(this.endDate){this.container.find('input[name="daterangepicker_end"]').removeClass('active');this.container.find('input[name="daterangepicker_start"]').addClass('active')}else{this.container.find('input[name="daterangepicker_end"]').addClass('active');this.container.find('input[name="daterangepicker_start"]').removeClass('active')}this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format('YYYY-MM')==this.leftCalendar.month.format('YYYY-MM')||this.startDate.format('YYYY-MM')==this.rightCalendar.month.format('YYYY-MM'))&&(this.endDate.format('YYYY-MM')==this.leftCalendar.month.format('YYYY-MM')||this.endDate.format('YYYY-MM')==this.rightCalendar.month.format('YYYY-MM'))){return}this.leftCalendar.month=this.startDate.clone().date(2);if(!this.linkedCalendars&&(this.endDate.month()!=this.startDate.month()||this.endDate.year()!=this.startDate.year())){this.rightCalendar.month=this.endDate.clone().date(2)}else{this.rightCalendar.month=this.startDate.clone().date(2).add(1,'month')}}else{if(this.leftCalendar.month.format('YYYY-MM')!=this.startDate.format('YYYY-MM')&&this.rightCalendar.month.format('YYYY-MM')!=this.startDate.format('YYYY-MM')){this.leftCalendar.month=this.startDate.clone().date(2);this.rightCalendar.month=this.startDate.clone().date(2).add(1,'month')}}if(this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate){this.rightCalendar.month=this.maxDate.clone().date(2);this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,'month')}},updateCalendars:function(){if(this.timePicker){var a,minute,second;if(this.endDate){a=parseInt(this.container.find('.left .hourselect').val(),10);minute=parseInt(this.container.find('.left .minuteselect').val(),10);second=this.timePickerSeconds?parseInt(this.container.find('.left .secondselect').val(),10):0;if(!this.timePicker24Hour){var b=this.container.find('.left .ampmselect').val();if(b==='PM'&&a<12)a+=12;if(b==='AM'&&a===12)a=0}}else{a=parseInt(this.container.find('.right .hourselect').val(),10);minute=parseInt(this.container.find('.right .minuteselect').val(),10);second=this.timePickerSeconds?parseInt(this.container.find('.right .secondselect').val(),10):0;if(!this.timePicker24Hour){var b=this.container.find('.right .ampmselect').val();if(b==='PM'&&a<12)a+=12;if(b==='AM'&&a===12)a=0}}this.leftCalendar.month.hour(a).minute(minute).second(second);this.rightCalendar.month.hour(a).minute(minute).second(second)}this.renderCalendar('left');this.renderCalendar('right');this.container.find('.ranges li').removeClass('active');if(this.endDate==null)return;this.calculateChosenLabel()},renderCalendar:function(c){var d=c=='left'?this.leftCalendar:this.rightCalendar;var e=d.month.month();var f=d.month.year();var g=d.month.hour();var h=d.month.minute();var j=d.month.second();var k=P([f,e]).daysInMonth();var l=P([f,e,1]);var n=P([f,e,k]);var o=P(l).subtract(1,'month').month();var p=P(l).subtract(1,'month').year();var q=P([p,o]).daysInMonth();var r=l.day();var d=[];d.firstDay=l;d.lastDay=n;for(var i=0;i<6;i++){d[i]=[]}var s=q-r+this.locale.firstDay+1;if(s>q)s-=7;if(r==this.locale.firstDay)s=q-6;var t=P([p,o,s,12,h,j]);var u,L;for(var i=0,u=0,L=0;i<42;i++,u++,t=P(t).add(24,'hour')){if(i>0&&u%7===0){u=0;L++}d[L][u]=t.clone().hour(g).minute(h).second(j);t.hour(12);if(this.minDate&&d[L][u].format('YYYY-MM-DD')==this.minDate.format('YYYY-MM-DD')&&d[L][u].isBefore(this.minDate)&&c=='left'){d[L][u]=this.minDate.clone()}if(this.maxDate&&d[L][u].format('YYYY-MM-DD')==this.maxDate.format('YYYY-MM-DD')&&d[L][u].isAfter(this.maxDate)&&c=='right'){d[L][u]=this.maxDate.clone()}}if(c=='left'){this.leftCalendar.calendar=d}else{this.rightCalendar.calendar=d}var v=c=='left'?this.minDate:this.startDate;var w=this.maxDate;var x=c=='left'?this.startDate:this.endDate;var z=this.locale.direction=='ltr'?{left:'chevron-left',right:'chevron-right'}:{left:'chevron-right',right:'chevron-left'};var A='<table class="table-condensed">';A+='<thead>';A+='<tr>';if(this.showWeekNumbers||this.showISOWeekNumbers)A+='<th></th>';if((!v||v.isBefore(d.firstDay))&&(!this.linkedCalendars||c=='left')){A+='<th class="prev available"><i class="fa fa-'+z.left+' glyphicon glyphicon-'+z.left+'"></i></th>'}else{A+='<th></th>'}var B=this.locale.monthNames[d[1][1].month()]+d[1][1].format(" YYYY");if(this.showDropdowns){var C=d[1][1].month();var D=d[1][1].year();var E=(w&&w.year())||(D+5);var F=(v&&v.year())||(D-50);var G=D==F;var H=D==E;var I='<select class="monthselect">';for(var m=0;m<12;m++){if((!G||m>=v.month())&&(!H||m<=w.month())){I+="<option value='"+m+"'"+(m===C?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>"}else{I+="<option value='"+m+"'"+(m===C?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[m]+"</option>"}}I+="</select>";var J='<select class="yearselect">';for(var y=F;y<=E;y++){J+='<option value="'+y+'"'+(y===D?' selected="selected"':'')+'>'+y+'</option>'}J+='</select>';B=I+J}A+='<th colspan="5" class="month">'+B+'</th>';if((!w||w.isAfter(d.lastDay))&&(!this.linkedCalendars||c=='right'||this.singleDatePicker)){A+='<th class="next available"><i class="fa fa-'+z.right+' glyphicon glyphicon-'+z.right+'"></i></th>'}else{A+='<th></th>'}A+='</tr>';A+='<tr>';if(this.showWeekNumbers||this.showISOWeekNumbers)A+='<th class="week">'+this.locale.weekLabel+'</th>';$.each(this.locale.daysOfWeek,function(a,b){A+='<th>'+b+'</th>'});A+='</tr>';A+='</thead>';A+='<tbody>';if(this.endDate==null&&this.dateLimit){var K=this.startDate.clone().add(this.dateLimit).endOf('day');if(!w||K.isBefore(w)){w=K}}for(var L=0;L<6;L++){A+='<tr>';if(this.showWeekNumbers)A+='<td class="week">'+d[L][0].week()+'</td>';else if(this.showISOWeekNumbers)A+='<td class="week">'+d[L][0].isoWeek()+'</td>';for(var u=0;u<7;u++){var M=[];if(d[L][u].isSame(new Date(),"day"))M.push('today');if(d[L][u].isoWeekday()>5)M.push('weekend');if(d[L][u].month()!=d[1][1].month())M.push('off');if(this.minDate&&d[L][u].isBefore(this.minDate,'day'))M.push('off','disabled');if(w&&d[L][u].isAfter(w,'day'))M.push('off','disabled');if(this.isInvalidDate(d[L][u]))M.push('off','disabled');if(d[L][u].format('YYYY-MM-DD')==this.startDate.format('YYYY-MM-DD'))M.push('active','start-date');if(this.endDate!=null&&d[L][u].format('YYYY-MM-DD')==this.endDate.format('YYYY-MM-DD'))M.push('active','end-date');if(this.endDate!=null&&d[L][u]>this.startDate&&d[L][u]<this.endDate)M.push('in-range');var N=this.isCustomDate(d[L][u]);if(N!==false){if(typeof N==='string')M.push(N);else Array.prototype.push.apply(M,N)}var O='',disabled=false;for(var i=0;i<M.length;i++){O+=M[i]+' ';if(M[i]=='disabled')disabled=true}if(!disabled)O+='available';A+='<td class="'+O.replace(/^\s+|\s+$/g,'')+'" data-title="'+'r'+L+'c'+u+'">'+d[L][u].date()+'</td>'}A+='</tr>'}A+='</tbody>';A+='</table>';this.container.find('.calendar.'+c+' .calendar-table').html(A)},renderTimePicker:function(a){if(a=='right'&&!this.endDate)return;var b,selected,minDate,maxDate=this.maxDate;if(this.dateLimit&&(!this.maxDate||this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)))maxDate=this.startDate.clone().add(this.dateLimit);if(a=='left'){selected=this.startDate.clone();minDate=this.minDate}else if(a=='right'){selected=this.endDate.clone();minDate=this.startDate;var c=this.container.find('.calendar.right .calendar-time div');if(c.html()!=''){selected.hour(c.find('.hourselect option:selected').val()||selected.hour());selected.minute(c.find('.minuteselect option:selected').val()||selected.minute());selected.second(c.find('.secondselect option:selected').val()||selected.second());if(!this.timePicker24Hour){var d=c.find('.ampmselect option:selected').val();if(d==='PM'&&selected.hour()<12)selected.hour(selected.hour()+12);if(d==='AM'&&selected.hour()===12)selected.hour(0)}}if(selected.isBefore(this.startDate))selected=this.startDate.clone();if(maxDate&&selected.isAfter(maxDate))selected=maxDate.clone()}b='<select class="hourselect">';var e=this.timePicker24Hour?0:1;var f=this.timePicker24Hour?23:12;for(var i=e;i<=f;i++){var g=i;if(!this.timePicker24Hour)g=selected.hour()>=12?(i==12?12:i+12):(i==12?0:i);var h=selected.clone().hour(g);var j=false;if(minDate&&h.minute(59).isBefore(minDate))j=true;if(maxDate&&h.minute(0).isAfter(maxDate))j=true;if(g==selected.hour()&&!j){b+='<option value="'+i+'" selected="selected">'+i+'</option>'}else if(j){b+='<option value="'+i+'" disabled="disabled" class="disabled">'+i+'</option>'}else{b+='<option value="'+i+'">'+i+'</option>'}}b+='</select> ';b+=': <select class="minuteselect">';for(var i=0;i<60;i+=this.timePickerIncrement){var k=i<10?'0'+i:i;var h=selected.clone().minute(i);var j=false;if(minDate&&h.second(59).isBefore(minDate))j=true;if(maxDate&&h.second(0).isAfter(maxDate))j=true;if(selected.minute()==i&&!j){b+='<option value="'+i+'" selected="selected">'+k+'</option>'}else if(j){b+='<option value="'+i+'" disabled="disabled" class="disabled">'+k+'</option>'}else{b+='<option value="'+i+'">'+k+'</option>'}}b+='</select> ';if(this.timePickerSeconds){b+=': <select class="secondselect">';for(var i=0;i<60;i++){var k=i<10?'0'+i:i;var h=selected.clone().second(i);var j=false;if(minDate&&h.isBefore(minDate))j=true;if(maxDate&&h.isAfter(maxDate))j=true;if(selected.second()==i&&!j){b+='<option value="'+i+'" selected="selected">'+k+'</option>'}else if(j){b+='<option value="'+i+'" disabled="disabled" class="disabled">'+k+'</option>'}else{b+='<option value="'+i+'">'+k+'</option>'}}b+='</select> '}if(!this.timePicker24Hour){b+='<select class="ampmselect">';var l='';var m='';if(minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate))l=' disabled="disabled" class="disabled"';if(maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate))m=' disabled="disabled" class="disabled"';if(selected.hour()>=12){b+='<option value="AM"'+l+'>AM</option><option value="PM" selected="selected"'+m+'>PM</option>'}else{b+='<option value="AM" selected="selected"'+l+'>AM</option><option value="PM"'+m+'>PM</option>'}b+='</select>'}this.container.find('.calendar.'+a+' .calendar-time div').html(b)},updateFormInputs:function(){if(this.container.find('input[name=daterangepicker_start]').is(":focus")||this.container.find('input[name=daterangepicker_end]').is(":focus"))return;this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.locale.format));if(this.endDate)this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.locale.format));if(this.singleDatePicker||(this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate)))){this.container.find('button.applyBtn').removeAttr('disabled')}else{this.container.find('button.applyBtn').attr('disabled','disabled')}},move:function(){var a={top:0,left:0},containerTop;var b=$(window).width();if(!this.parentEl.is('body')){a={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};b=this.parentEl[0].clientWidth+this.parentEl.offset().left}if(this.drops=='up')containerTop=this.element.offset().top-this.container.outerHeight()-a.top;else containerTop=this.element.offset().top+this.element.outerHeight()-a.top;this.container[this.drops=='up'?'addClass':'removeClass']('dropup');if(this.opens=='left'){this.container.css({top:containerTop,right:b-this.element.offset().left-this.element.outerWidth(),left:'auto'});if(this.container.offset().left<0){this.container.css({right:'auto',left:9})}}else if(this.opens=='center'){this.container.css({top:containerTop,left:this.element.offset().left-a.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:'auto'});if(this.container.offset().left<0){this.container.css({right:'auto',left:9})}}else{this.container.css({top:containerTop,left:this.element.offset().left-a.left,right:'auto'});if(this.container.offset().left+this.container.outerWidth()>$(window).width()){this.container.css({left:'auto',right:0})}}},show:function(e){if(this.isShowing)return;this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e)},this);$(document).on('mousedown.daterangepicker',this._outsideClickProxy).on('touchend.daterangepicker',this._outsideClickProxy).on('click.daterangepicker','[data-toggle=dropdown]',this._outsideClickProxy).on('focusin.daterangepicker',this._outsideClickProxy);$(window).on('resize.daterangepicker',$.proxy(function(e){this.move(e)},this));this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.previousRightTime=this.endDate.clone();this.updateView();this.container.show();this.move();this.element.trigger('show.daterangepicker',this);this.isShowing=true},hide:function(e){if(!this.isShowing)return;if(!this.endDate){this.startDate=this.oldStartDate.clone();this.endDate=this.oldEndDate.clone()}if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))this.callback(this.startDate,this.endDate,this.chosenLabel);this.updateElement();$(document).off('.daterangepicker');$(window).off('.daterangepicker');this.container.hide();this.element.trigger('hide.daterangepicker',this);this.isShowing=false},toggle:function(e){if(this.isShowing){this.hide()}else{this.show()}},outsideClick:function(e){var a=$(e.target);if(e.type=="focusin"||a.closest(this.element).length||a.closest(this.container).length||a.closest('.calendar-table').length)return;this.hide();this.element.trigger('outsideClick.daterangepicker',this)},showCalendars:function(){this.container.addClass('show-calendar');this.move();this.element.trigger('showCalendar.daterangepicker',this)},hideCalendars:function(){this.container.removeClass('show-calendar');this.element.trigger('hideCalendar.daterangepicker',this)},hoverRange:function(e){if(this.container.find('input[name=daterangepicker_start]').is(":focus")||this.container.find('input[name=daterangepicker_end]').is(":focus"))return;var a=e.target.getAttribute('data-range-key');if(a==this.locale.customRangeLabel){this.updateView()}else{var b=this.ranges[a];this.container.find('input[name=daterangepicker_start]').val(b[0].format(this.locale.format));this.container.find('input[name=daterangepicker_end]').val(b[1].format(this.locale.format))}},clickRange:function(e){var a=e.target.getAttribute('data-range-key');this.chosenLabel=a;if(a==this.locale.customRangeLabel){this.showCalendars()}else{var b=this.ranges[a];this.startDate=b[0];this.endDate=b[1];if(!this.timePicker){this.startDate.startOf('day');this.endDate.endOf('day')}if(!this.alwaysShowCalendars)this.hideCalendars();this.clickApply()}},clickPrev:function(e){var a=$(e.target).parents('.calendar');if(a.hasClass('left')){this.leftCalendar.month.subtract(1,'month');if(this.linkedCalendars)this.rightCalendar.month.subtract(1,'month')}else{this.rightCalendar.month.subtract(1,'month')}this.updateCalendars()},clickNext:function(e){var a=$(e.target).parents('.calendar');if(a.hasClass('left')){this.leftCalendar.month.add(1,'month')}else{this.rightCalendar.month.add(1,'month');if(this.linkedCalendars)this.leftCalendar.month.add(1,'month')}this.updateCalendars()},hoverDate:function(e){if(!$(e.target).hasClass('available'))return;var h=$(e.target).attr('data-title');var i=h.substr(1,1);var j=h.substr(3,1);var k=$(e.target).parents('.calendar');var l=k.hasClass('left')?this.leftCalendar.calendar[i][j]:this.rightCalendar.calendar[i][j];if(this.endDate&&!this.container.find('input[name=daterangepicker_start]').is(":focus")){this.container.find('input[name=daterangepicker_start]').val(l.format(this.locale.format))}else if(!this.endDate&&!this.container.find('input[name=daterangepicker_end]').is(":focus")){this.container.find('input[name=daterangepicker_end]').val(l.format(this.locale.format))}var m=this.leftCalendar;var n=this.rightCalendar;var o=this.startDate;if(!this.endDate){this.container.find('.calendar tbody td').each(function(a,b){if($(b).hasClass('week'))return;var c=$(b).attr('data-title');var d=c.substr(1,1);var e=c.substr(3,1);var f=$(b).parents('.calendar');var g=f.hasClass('left')?m.calendar[d][e]:n.calendar[d][e];if((g.isAfter(o)&&g.isBefore(l))||g.isSame(l,'day')){$(b).addClass('in-range')}else{$(b).removeClass('in-range')}})}},clickDate:function(e){if(!$(e.target).hasClass('available'))return;var a=$(e.target).attr('data-title');var b=a.substr(1,1);var c=a.substr(3,1);var d=$(e.target).parents('.calendar');var f=d.hasClass('left')?this.leftCalendar.calendar[b][c]:this.rightCalendar.calendar[b][c];if(this.endDate||f.isBefore(this.startDate,'day')){if(this.timePicker){var g=parseInt(this.container.find('.left .hourselect').val(),10);if(!this.timePicker24Hour){var h=this.container.find('.left .ampmselect').val();if(h==='PM'&&g<12)g+=12;if(h==='AM'&&g===12)g=0}var i=parseInt(this.container.find('.left .minuteselect').val(),10);var j=this.timePickerSeconds?parseInt(this.container.find('.left .secondselect').val(),10):0;f=f.clone().hour(g).minute(i).second(j)}this.endDate=null;this.setStartDate(f.clone())}else if(!this.endDate&&f.isBefore(this.startDate)){this.setEndDate(this.startDate.clone())}else{if(this.timePicker){var g=parseInt(this.container.find('.right .hourselect').val(),10);if(!this.timePicker24Hour){var h=this.container.find('.right .ampmselect').val();if(h==='PM'&&g<12)g+=12;if(h==='AM'&&g===12)g=0}var i=parseInt(this.container.find('.right .minuteselect').val(),10);var j=this.timePickerSeconds?parseInt(this.container.find('.right .secondselect').val(),10):0;f=f.clone().hour(g).minute(i).second(j)}this.setEndDate(f.clone());if(this.autoApply){this.calculateChosenLabel();this.clickApply()}}if(this.singleDatePicker){this.setEndDate(this.startDate);if(!this.timePicker)this.clickApply()}this.updateView();e.stopPropagation()},calculateChosenLabel:function(){var a=true;var i=0;for(var b in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[b][0])&&this.endDate.isSame(this.ranges[b][1])){a=false;this.chosenLabel=this.container.find('.ranges li:eq('+i+')').addClass('active').html();break}}else{if(this.startDate.format('YYYY-MM-DD')==this.ranges[b][0].format('YYYY-MM-DD')&&this.endDate.format('YYYY-MM-DD')==this.ranges[b][1].format('YYYY-MM-DD')){a=false;this.chosenLabel=this.container.find('.ranges li:eq('+i+')').addClass('active').html();break}}i++}if(a){if(this.showCustomRangeLabel){this.chosenLabel=this.container.find('.ranges li:last').addClass('active').html()}else{this.chosenLabel=null}this.showCalendars()}},clickApply:function(e){this.hide();this.element.trigger('apply.daterangepicker',this)},clickCancel:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger('cancel.daterangepicker',this)},monthOrYearChanged:function(e){var a=$(e.target).closest('.calendar').hasClass('left'),leftOrRight=a?'left':'right',cal=this.container.find('.calendar.'+leftOrRight);var b=parseInt(cal.find('.monthselect').val(),10);var c=cal.find('.yearselect').val();if(!a){if(c<this.startDate.year()||(c==this.startDate.year()&&b<this.startDate.month())){b=this.startDate.month();c=this.startDate.year()}}if(this.minDate){if(c<this.minDate.year()||(c==this.minDate.year()&&b<this.minDate.month())){b=this.minDate.month();c=this.minDate.year()}}if(this.maxDate){if(c>this.maxDate.year()||(c==this.maxDate.year()&&b>this.maxDate.month())){b=this.maxDate.month();c=this.maxDate.year()}}if(a){this.leftCalendar.month.month(b).year(c);if(this.linkedCalendars)this.rightCalendar.month=this.leftCalendar.month.clone().add(1,'month')}else{this.rightCalendar.month.month(b).year(c);if(this.linkedCalendars)this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,'month')}this.updateCalendars()},timeChanged:function(e){var a=$(e.target).closest('.calendar'),isLeft=a.hasClass('left');var b=parseInt(a.find('.hourselect').val(),10);var c=parseInt(a.find('.minuteselect').val(),10);var d=this.timePickerSeconds?parseInt(a.find('.secondselect').val(),10):0;if(!this.timePicker24Hour){var f=a.find('.ampmselect').val();if(f==='PM'&&b<12)b+=12;if(f==='AM'&&b===12)b=0}if(isLeft){var g=this.startDate.clone();g.hour(b);g.minute(c);g.second(d);this.setStartDate(g);if(this.singleDatePicker){this.endDate=this.startDate.clone()}else if(this.endDate&&this.endDate.format('YYYY-MM-DD')==g.format('YYYY-MM-DD')&&this.endDate.isBefore(g)){this.setEndDate(g.clone())}}else if(this.endDate){var h=this.endDate.clone();h.hour(b);h.minute(c);h.second(d);this.setEndDate(h)}this.updateCalendars();this.updateFormInputs();this.renderTimePicker('left');this.renderTimePicker('right')},formInputsChanged:function(e){var a=$(e.target).closest('.calendar').hasClass('right');var b=P(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format);var c=P(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);if(b.isValid()&&c.isValid()){if(a&&c.isBefore(b))b=c.clone();this.setStartDate(b);this.setEndDate(c);if(a){this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format))}else{this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))}}this.updateView()},formInputsFocused:function(e){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass('active');$(e.target).addClass('active');var a=$(e.target).closest('.calendar').hasClass('right');if(a){this.endDate=null;this.setStartDate(this.startDate.clone());this.updateView()}},formInputsBlurred:function(e){if(!this.endDate){var a=this.container.find('input[name="daterangepicker_end"]').val();var b=P(a,this.locale.format);if(b.isValid()){this.setEndDate(b);this.updateView()}}},elementChanged:function(){if(!this.element.is('input'))return;if(!this.element.val().length)return;if(this.element.val().length<this.locale.format.length)return;var a=this.element.val().split(this.locale.separator),start=null,end=null;if(a.length===2){start=P(a[0],this.locale.format);end=P(a[1],this.locale.format)}if(this.singleDatePicker||start===null||end===null){start=P(this.element.val(),this.locale.format);end=start}if(!start.isValid()||!end.isValid())return;this.setStartDate(start);this.setEndDate(end);this.updateView()},keydown:function(e){if((e.keyCode===9)||(e.keyCode===13)){this.hide()}},updateElement:function(){if(this.element.is('input')&&!this.singleDatePicker&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));this.element.trigger('change')}else if(this.element.is('input')&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger('change')}},remove:function(){this.container.remove();this.element.off('.daterangepicker');this.element.removeData()}};$.fn.daterangepicker=function(b,c){this.each(function(){var a=$(this);if(a.data('daterangepicker'))a.data('daterangepicker').remove();a.data('daterangepicker',new Q(a,b,c))});return this};return Q}));